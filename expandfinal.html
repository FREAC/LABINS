<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Update FeatureLayer using applyEdits() - 4.9</title>

    <link rel="stylesheet" href="https://js.arcgis.com/4.9/esri/css/main.css">
    <script src="https://js.arcgis.com/4.9/"></script>

    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }

        .buttonTray {
            background: #fff;
            font-family: "Avenir Next W00", "Helvetica Neue", Helvetica, Arial, sans-serif;
            line-height: 1.5em;
            overflow: auto;
            padding: 5px 5px;
            width: 105px;
            display: flex;
        }
    </style>

    <script>
        require([
                "esri/Map",
                "esri/views/MapView",
                "esri/layers/FeatureLayer",
                "esri/widgets/Expand",
                "esri/widgets/Home",
                "esri/widgets/Locate",
                "esri/widgets/Legend",
                "dojo/on"
            ],
            function (
                Map, MapView, FeatureLayer, Expand, Home, Locate, Legend, on
            ) {

                let editFeature, highlight, featureForm, buttonTray, attributeEditing, updateInstructionDiv;

                const featureLayer = new FeatureLayer({
                    url: "https://services.arcgis.com/V6ZHFr6zdgNZuVG0/ArcGIS/rest/services/IncidentsReport/FeatureServer/0",
                    outFields: ["*"],
                    popupEnabled: false,
                    id: "incidentsLayer"
                });

                const map = new Map({
                    basemap: "dark-gray",
                    layers: [featureLayer]
                });

                const view = new MapView({
                    container: "viewDiv",
                    map: map,
                    center: [-117.18, 34.06],
                    zoom: 15
                });

                buttonTray = document.getElementById("buttonTray");


                var home = new Home({
                    container: "homeDiv",
                    view: view
                });

                var locate = new Locate({
                    container: "locateDiv",
                    view: view
                });

                var legend = new Legend({ <<
                    << << < HEAD
                    //container: "legendDiv",
                    view: view ===
                        === =
                        view: view,

                    >>>
                    >>> > 5170 d4b14377597a9b1beb0c0be158d945f61f4d
                });

                // Expand widget for the buttonTray div.
                const editExpand = new Expand({
                    expandIconClass: "esri-icon-edit",
                    expandTooltip: "Expand Edit",
                    expanded: false,
                    view: view,
                    content: buttonTray,
                    group: "left"
                });

                view.ui.add(editExpand, "bottom-left");
                var legendStatus;
                on(document.getElementById("legendBtn"), 'click', function (e) {
                    console.log(legendStatus);
                    if (legendStatus !== 1) {
                        view.ui.add(legend, 'bottom-left');
                        legendStatus = 1;
                    } else {
                        view.ui.remove(legend);
                        legendStatus = 0;
                    }
                });

            });
    </script>
</head>

<body>
    <div id="buttonTray" class="buttonTray">
        <div id="homeDiv" style="display: flex"></div>
        <div id="locateDiv" style="display: flex"></div>
        <<<<<<< HEAD <!-- <div id="legendDiv" style="display: flex">
    </div> -->
    <div id="legendDiv" style="display:flex;">
        <button id="legendBtn" class="btn-clear esri-icon-drag-horizontal" style="background-color: #fff"></button>
    </div>
    =======
    <button id="legendBtn" class="esri-widget--button">Button</button>
    >>>>>>> 5170d4b14377597a9b1beb0c0be158d945f61f4d
    </div>
    <div id="viewDiv"></div>
</body>

</html>